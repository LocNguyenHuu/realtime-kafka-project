<!DOCTYPE html>
<meta charset="utf-8">
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>
  <script src="d3.v3.min.js"></script>
  <script src="topojson.v1.min.js"></script>
  <script src="datamaps.usa.min.js"></script>
  <h1 style="text-align: center; color: #2E4053;">Sales BI Dashboard</h1>
  <div style="clear: both; text-align: center;"><h5 style="font-style:normal; color: #2E4053;">Team 6: Alexander Mendoza, Jayadev Vallath and Maria Mendoza</h5></div>
  <div id="mapcontainer" style="position: relative; width: 800px; max-height: 600px; float: left;"></div>
  <div style="float: left; margin: 0 auto; padding: 150px 50px 50px 50px;">
  <span style="color: #829DB4; font-size: 0.9em;">Updated 5s ago</span>
  <table class="table table-bordered table-striped" style="width: 300px;">
  <thead><tr><th>Territory</th><th>Gallons</th><th>Plan</th><th>Status</th></thead>
  <tbody>
    <tr>
      <td>NY Metro</td><td>1,534</td><td>10,000</td><td align="center"><span style="color: green;" class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
    </tr>
    <tr>
      <td>North East</td><td>1,124</td><td>23,000</td><td align="center"><span style="color: red;" class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
    </tr>
    <tr>
      <td>Texas</td><td>9,214</td><td>10,320</td><td align="center"><span style="color: green;" class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
    </tr>
    <tr>
      <td>Great Lakes</td><td>8,642</td><td>43,310</td><td align="center"><span style="color: green;" class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
      </td>
    </tr>
  </tbody>
  </table>
  </div>
     <script>
     var tcolor = {};
         tcolor['westcoast'] = '#ff99cc';
         tcolor['texas'] = '#ffcc99';
         tcolor['nymetro'] = 'red';
         tcolor['northeast'] = '#99ccff';
         tcolor['greatlakes'] = '#ff9999';
         tcolor['southeast'] = '#cc99ff';
      var map = new Datamap({
        scope: 'usa',
        element: document.getElementById('mapcontainer'),
        geographyConfig: {
            highlightOnHover: false,
            popupTemplate: function(geo, data) {
                // don't show tooltip if country don't present in dataset
                if (!data) { return ; }
                // tooltip content
                return ['<div class="hoverinfo">',
                    '<strong>', geo.properties.name, '</strong>',
                    '<br>Count: <strong>', data.numberOfThings, '</strong>',
                    '</div>'].join('');
            }
        },
        projection: 'mercator',
        height: 500,
        fills: {
          defaultFill: '#e0e0e0',
          westcoast: tcolor['westcoast'],
          texas: tcolor['texas'],
          nymetro: tcolor['nymetro'],
          northeast: tcolor['northeast'],
          greatlakes: tcolor['greatlakes'],
          southeast: tcolor['southeast']
        },
        data: {
          WA: {fillKey: 'westcoast', numberOfThings: 1000 },
          OR: {fillKey: 'westcoast', numberOfThings: 10 },
          CA: {fillKey: 'westcoast', numberOfThings: 1420 },
          AK: {fillKey: 'westcoast', numberOfThings: 9830 },
          TX: {fillKey: 'texas' },
          CT: {fillKey: 'northeast' },
          VT: {fillKey: 'northeast' },
          NH: {fillKey: 'northeast' },
          ME: {fillKey: 'northeast' },
          MA: {fillKey: 'northeast' },
          RI: {fillKey: 'northeast' },
          NY: {fillKey: 'northeast' },
          NJ: {fillKey: 'northeast' },
          PA: {fillKey: 'northeast' },
          VA: {fillKey: 'northeast' },
          MD: {fillKey: 'northeast' },
          WV: {fillKey: 'northeast' },
          DE: {fillKey: 'northeast' },
          IL: {fillKey: 'greatlakes' },
          IN: {fillKey: 'greatlakes' },
          MI: {fillKey: 'greatlakes' },
          MN: {fillKey: 'greatlakes' },
          OH: {fillKey: 'greatlakes' },
          WI: {fillKey: 'greatlakes' },
          AL: {fillKey: 'southeast' },
          FL: {fillKey: 'southeast' },
          GA: {fillKey: 'southeast' },
          LA: {fillKey: 'southeast' },
          MS: {fillKey: 'southeast' },
          SC: {fillKey: 'southeast' },
          NC: {fillKey: 'southeast' },
          TN: {fillKey: 'southeast' },
          KY: {fillKey: 'southeast' },
          AR: {fillKey: 'southeast' }
        }
      })
     map.bubbles([{
        name: 'NY Metro',
        radius: 10,
        fillKey: 'nymetro',
        latitude: 40.7773,
        longitude: -73.8727
      }])
//window.setInterval(function() {
//  map.updateChoropleth({
//    'CA': { color: 'green' },
//  },
//  window.setTimeout(function() {
//  map.updateChoropleth({
//    'CA': { color: '#ff99cc' },
//  });
//  }
//  , 1000));
//}, 2000);
     </script>
</body>
</html>
